# training:
  mode: train # train, test
  learning_rate: 1e-4
  training_steps: 5001 #50001 #1000000
  checking_steps: 10000
  evaluation_epochs: 1 #5
  evaluate_every_n_steps: 50
  save_pianoroll_every_n_steps: [10, 20, 50, 100, 200, 500, 1000, 2000] # should be evaluate_every_n_steps * n
  cal_metrics_every_n_steps: 50
  batch: 28 #24
  num_workers: 2 
  losses:
    loss_decoder: [decoder_outputs, decoder_targets, loss.CrossEntropyLoss]
  log_dir:
  debug_log_offline: false

  # initial freeze
  freeze_encoder_init: true
  freeze_decoder_init: true
  freeze_hrm_init: true

  # phase boundaries (set to null to disable)
  unfreeze_decoder_step: 500
  unfreeze_encoder_step: 1800
  unfreeze_hrm_step: 800

  # lr warmup (steps)
  hrm_lr_warmup_steps: 500

  # per-module learning rates
  lr_hrm: 1.0e-4
  lr_decoder: 1.0e-4
  lr_encoder: 1.0e-4

  # ACT halting auxiliary losses (used only when model.hrm_use_act_halt=true)
  hrm_q_halt_loss_weight: 0.5
  hrm_q_continue_loss_weight: 0.5
